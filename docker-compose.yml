version: '3'

services:
  db:
    image: registry.gitlab.com/zisoft/image/awareness/db:2.7.1-p
    environment:
      - MYSQL_USER=${DB_USERNAME_USER}
      - MYSQL_DATABASE=${DB_DATABASE}
      - MYSQL_PASSWORD=${DB_PASSWORD}
      - MYSQL_ROOT_PASSWORD=${DB_PASSWORD}
    volumes:
      - db_data:/var/lib/mysql
  web:
    image: registry.gitlab.com/zisoft/image/awareness/web:2.7.1-p
  ui:
    image: registry.gitlab.com/zisoft/image/awareness/ui:2.7.1-p
  worker:
    image: registry.gitlab.com/zisoft/image/awareness/worker:2.7.1-p
  meta:
    image: registry.gitlab.com/zisoft/image/awareness/meta:2.7.1-p
    environment:
      - MB_DB_FILE=/tmp/metabase.db
  proxy:
    image: registry.gitlab.com/zisoft/image/awareness/proxy:2.7.1-p
    ports:
      - "80:80"
      - "443:443"
  cron:
    image: registry.gitlab.com/zisoft/image/awareness/cron:2.7.1-p
volumes:
    db_data: {}
